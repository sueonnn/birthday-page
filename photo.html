<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì‚¬ì§„ ì´¬ì˜</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f0fff5;
        font-family: "Arial", sans-serif;
        text-align: center;
        padding: 30px;
      }

      video,
      canvas {
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        max-width: 100%;
        height: auto;
      }

      .btn {
        margin: 15px 10px;
      }
    </style>
  </head>
  <body>
    <h2 class="mb-4">ğŸ“¸ ì‚¬ì§„ í•œ ë°© ì°ì!</h2>

    <!-- ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼ -->
    <video id="video" autoplay playsinline></video>

    <div>
      <button class="btn btn-success" onclick="takePhoto()">ğŸ“· ì°°ì¹µ</button>
      <button class="btn btn-primary" onclick="downloadPhoto()">
        ğŸ’¾ ì €ì¥í•˜ê¸°
      </button>
    </div>

    <!-- ìº¡ì²˜ëœ ì‚¬ì§„ -->
    <canvas id="canvas" width="640" height="480" style="display: none"></canvas>

    <script>
      const video = document.getElementById("video");
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      // ì›¹ìº  ì—°ê²°
      navigator.mediaDevices
        .getUserMedia({ video: true })
        .then((stream) => {
          video.srcObject = stream;
        })
        .catch((err) => {
          alert("ì¹´ë©”ë¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ ğŸ¥²");
          console.error(err);
        });

      // ì‚¬ì§„ ì´¬ì˜
      function takePhoto() {
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        canvas.style.display = "block";
      }

      // ì‚¬ì§„ ì €ì¥
      function downloadPhoto() {
        const link = document.createElement("a");
        link.download = "birthday-photo.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      }
    </script>
  </body>
</html>
